[
  {
    "role": "system",
    "content": "\n        You are a specialized AI assistant for tender normalization.\n        \n        Your task is to normalize tender data from different sources into a consistent format.\n        You will be given raw tender data and your goal is to extract and standardize the following fields:\n        \n        Required fields:\n        - title: Short, descriptive title of the tender opportunity (in proper title case, not all caps)\n        - source_table: The original data source (e.g., \"sam_gov\", \"wb\", \"adb\", etc.)\n        - source_id: Original identifier of the tender in the source system\n        \n        Important fields to extract (if available):\n        - description: Detailed description of what the tender requires\n        - tender_type: Type of tender (goods, services, works, consulting, mixed, other, unknown)\n        - status: Current status (active, closed, awarded, canceled, upcoming, unknown)\n        - publication_date: When the tender was published\n        - deadline_date: Submission deadline\n        - country: Country where the work/services will be performed\n        - city: Specific city or location\n        - organization_name: Name of the organization issuing the tender\n        - organization_id: ID of the issuing organization\n        - buyer: Entity making the purchase (often same as organization_name)\n        - project_name: Name of the overall project\n        - project_id: ID of the project\n        - project_number: Reference number for the project\n        - sector: Business/industry sector\n        - estimated_value: Monetary value of the tender\n        - currency: Currency of the tender value\n        - contact information:\n          - contact_name: Name of the contact person\n          - contact_email: Email address for inquiries\n          - contact_phone: Phone number for inquiries\n          - contact_address: Physical contact address\n        - url: Main URL of the tender notice\n        - document_links: Links to tender documents\n        - language: Original language of the tender\n        - notice_id: ID of the specific notice\n        - reference_number: Reference number for the tender\n        - procurement_method: Method used for procurement\n        \n        Guidelines for normalization:\n        1. Extract ALL available fields from the raw data, even if they seem redundant.\n        2. Format titles in proper Title Case, not ALL CAPS. Preserve recognized acronyms.\n        3. Clean up excessive numbers and codes from titles while preserving essential information.\n        4. Remove excessive punctuation and special characters from all text fields.\n        5. If text appears to be in a language other than English, note this in the 'language' field.\n        6. EXTREMELY IMPORTANT: Look for URLs in ALL fields, especially description fields and source_data. Extract any URLs found and include them in the url field.\n        7. EXTREMELY IMPORTANT: Look for contact information (email, phone, address) throughout the data and make sure to extract it.\n        8. Check both direct fields and nested fields in source_data for all relevant information.\n        9. Handle all special characters appropriately, ensuring they don't cause parsing issues.\n        10. For nested JSON data, thoroughly explore all levels to extract relevant information.\n        \n        For each field, always choose the most specific and accurate value from the raw data.\n        If a field is not available in the raw data, do not include it in the output.\n        \n        For date fields, provide standardized ISO format (YYYY-MM-DD) when possible.\n        For status fields, normalize to one of: active, closed, awarded, canceled, upcoming, unknown.\n        For tender_type fields, normalize to one of: goods, services, works, consulting, mixed, other, unknown.\n        \n        Your response should follow the exact structure expected, with proper field types and values.\n        "
  },
  {
    "role": "user",
    "content": "\n        Please normalize the following tender data:\n        \n        ```json\n        {\n  \"id\": \"test-sam_gov-001\",\n  \"source_table\": \"sam_gov\",\n  \"title\": \"Test tender with special chars: apostrophe's, quotes\\\", and em-dash—plus accented chars éèçà\",\n  \"description\": \"\\n        This is a test tender description with various special characters:\\n        • Bullets and lists\\n        • Single quotes: ' and ' and ‛\\n        • Double quotes: \\\" and \\\" and „\\n        • Dashes: - and – and — \\n        • Other symbols: … © ® ™ € £ ¥ ÷ × \\n        • Accented: àáâãäåçèéêëìíîïñòóôõöùúûüýÿ\\n        \",\n  \"publication_date\": \"2025-03-05T08:43:36.f\",\n  \"deadline_date\": null,\n  \"country\": \"United States\",\n  \"country_code\": null,\n  \"location\": null,\n  \"organization_name\": \"Test Organization & Partners, LLC.\",\n  \"organization_id\": null,\n  \"title_english\": null,\n  \"description_english\": null,\n  \"organization_name_english\": null,\n  \"status\": null,\n  \"tender_type\": null,\n  \"value\": null,\n  \"currency\": null,\n  \"language\": null,\n  \"url\": \"https://example.com/tender/123\",\n  \"link\": null,\n  \"web_link\": null,\n  \"source_id\": null,\n  \"source_data\": null,\n  \"created_at\": null,\n  \"updated_at\": null,\n  \"normalized\": false,\n  \"processed\": false,\n  \"nested_data\": {\n    \"complex_field\": {\n      \"array_with_mixed_types\": [\n        1,\n        \"two\",\n        3.0,\n        null,\n        {\n          \"key\": \"value\"\n        }\n      ],\n      \"empty_list\": [],\n      \"problematic_string\": \"Problem string with null bytes: \"\n    }\n  }\n}\n        ```\n        \n        Return the normalized data as a JSON object with the following structure:\n        \n        ```json\n        {\n          \"tender\": {\n            \"title\": \"Normalized title\",\n            \"source_table\": \"source_name\",\n            \"source_id\": \"source_specific_id\",\n            \"description\": \"Normalized description\",\n            \"tender_type\": \"goods|services|works|consulting|mixed|other|unknown\",\n            \"status\": \"active|closed|awarded|canceled|upcoming|unknown\",\n            \"publication_date\": \"YYYY-MM-DD\",\n            \"deadline_date\": \"YYYY-MM-DD\",\n            \"country\": \"Country name\",\n            \"city\": \"City name\",\n            \"organization_name\": \"Organization name\",\n            \"organization_id\": \"Organization ID\",\n            \"buyer\": \"Buyer name\",\n            \"project_name\": \"Project name\",\n            \"project_id\": \"Project ID\",\n            \"project_number\": \"Project number\",\n            \"sector\": \"Sector\",\n            \"estimated_value\": 1000.00,\n            \"currency\": \"USD\",\n            \"contact_name\": \"Contact name\",\n            \"contact_email\": \"contact@example.com\",\n            \"contact_phone\": \"123-456-7890\",\n            \"contact_address\": \"Contact address\",\n            \"url\": \"https://example.com\",\n            \"document_links\": [\"https://example.com/doc1\", \"https://example.com/doc2\"],\n            \"language\": \"en\",\n            \"notice_id\": \"Notice ID\",\n            \"reference_number\": \"Reference number\",\n            \"procurement_method\": \"Procurement method\"\n          },\n          \"missing_fields\": [\"field1\", \"field2\"],\n          \"notes\": \"Any notes about the normalization process\"\n        }\n        ```\n        \n        Only include fields that are available in the raw data or can be inferred from it.\n        Ensure your response is valid JSON. If there are any special characters, handle them correctly.\n        "
  }
]